{"ast":null,"code":"var _jsxFileName = \"/Users/nabinrajpandey/gophysio/bus-departure-react-client/src/components/SearchStop.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\nimport Countdown from \"react-countdown\";\nimport FindStopService from \"../services/FindStopService\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: \"100%\",\n    \"& > * + *\": {\n      marginTop: theme.spacing(2)\n    }\n  }\n}));\nvar undef;\n\nconst SearchStop = props => {\n  const fetchData = async () => {\n    setSearching(true);\n    const result = await FindStopService.getAll();\n    setSearching(false);\n    console.log(result);\n    setStops(result.data.locations);\n  };\n\n  const fetchData1 = async searchText => {\n    setSearching(true);\n    const result = await FindStopService.getByName(searchText);\n    setSearching(false); //console.log(result);\n\n    setStops(result.data.locations);\n  };\n\n  const fetchData2 = async () => {\n    var undef;\n\n    if (selectedStop != undef) {\n      setSearching(true);\n      const result = await FindStopService.getDepartures(selectedStop.id);\n      setSearching(false);\n      console.log(\"Departures:\", result.data.stopEvents);\n      setDeps(result.data.stopEvents);\n    }\n  };\n\n  const [stops, setStops] = useState([]);\n  const [selectedStop, setSelectedStop] = useState();\n  const [searchText, setSearchText] = useState();\n  const [deps, setDeps] = useState([]);\n  const [searching, setSearching] = useState(false);\n\n  const textChanged = e => {\n    //console.log(event.value);\n    console.log(e.target.value);\n    setSearchText(e.target.value);\n  }; //first cal only\n\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n  useEffect(() => {\n    console.log(\"selectedStop:\", selectedStop);\n    var undef;\n\n    if (selectedStop != undef) {\n      fetchData2();\n    }\n  }, [selectedStop]);\n  useEffect(() => {\n    console.log(\"searchText:\", searchText);\n    fetchData1(searchText);\n  }, [searchText]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"center\",\n      width: \"50%\",\n      margin: \"auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Countdown, {\n    style: {\n      color: \"#3faf3f\"\n    },\n    givenDate: \"November, 17, 2020\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Autocomplete, {\n    onChange: (event, newValue) => {\n      setSelectedStop(newValue);\n    },\n    id: \"controllable-states-demo\",\n    options: stops,\n    getOptionLabel: option => option.name,\n    renderInput: params => /*#__PURE__*/React.createElement(TextField, Object.assign({}, params, {\n      label: \"Stop Name\",\n      value: searchText,\n      onChange: e => {\n        textChanged(e);\n      },\n      variant: \"outlined\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }\n  }, searching && /*#__PURE__*/React.createElement(LinearProgress, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 26\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      background: \"#000\",\n      borderRadius: \"10px\",\n      marginTop: \"50px\",\n      height: \"600px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    style: {\n      color: \"#3faf3f\",\n      fontSize: 30,\n      margin: \"20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }, \"Departues: \", selectedStop != undef && selectedStop.name), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }), deps.length > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: \"500px\",\n      overflowY: \"auto\",\n      background: \"#000\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    style: {\n      listStyle: \"none\",\n      color: \"#3faf3f\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }\n  }, deps.map((dep, index) => /*#__PURE__*/React.createElement(\"tr\", {\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 21\n    }\n  }, index + 1)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 19\n    }\n  }, \"\\xA0\\xA0\\xA0\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 19\n    }\n  }, index % 4 == 0 ? /*#__PURE__*/React.createElement(\"marquee\", {\n    TimeToCross: \"10000\",\n    TimeToChange: \"2000\",\n    IsRandom: \"true\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 23\n    }\n  }, dep.location.name) : /*#__PURE__*/React.createElement(\"label\", {\n    style: {\n      color: \"#3faf3f\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 23\n    }\n  }, dep.transportation.destination.name)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 19\n    }\n  }, \"\\xA0\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 21\n    }\n  }, \"Time Left (HH:mm:ss):\")), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 19\n    }\n  }, \"\\xA0\\xA0\\xA0\\xA0\\xA0\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Countdown, {\n    daysInHours: true,\n    date: parseInt(dep.departureTimePlanned),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 23\n    }\n  }))), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 19\n    }\n  }, \"\\xA0\\xA0\\xA0\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 21\n    }\n  }, \"Operator:\")), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 19\n    }\n  }, \"\\xA0\\xA0\\xA0\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    style: {\n      color: \"#3faf3f\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 21\n    }\n  }, dep.transportation.operator.name)))))) : \"\"));\n};\n\nexport default SearchStop;","map":{"version":3,"sources":["/Users/nabinrajpandey/gophysio/bus-departure-react-client/src/components/SearchStop.js"],"names":["React","useState","useEffect","makeStyles","LinearProgress","TextField","Autocomplete","Countdown","FindStopService","useStyles","theme","root","width","marginTop","spacing","undef","SearchStop","props","fetchData","setSearching","result","getAll","console","log","setStops","data","locations","fetchData1","searchText","getByName","fetchData2","selectedStop","getDepartures","id","stopEvents","setDeps","stops","setSelectedStop","setSearchText","deps","searching","textChanged","e","target","value","display","flexDirection","justifyContent","margin","color","event","newValue","option","name","params","background","borderRadius","height","fontSize","length","overflowY","listStyle","map","dep","index","location","transportation","destination","parseInt","departureTimePlanned","operator"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\n\nimport TextField from \"@material-ui/core/TextField\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\n\nimport Countdown from \"react-countdown\";\n\nimport FindStopService from \"../services/FindStopService\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    \"& > * + *\": {\n      marginTop: theme.spacing(2),\n    },\n  },\n}));\n\nvar undef;\n\nconst SearchStop = (props) => {\n  const fetchData = async () => {\n    setSearching(true);\n    const result = await FindStopService.getAll();\n    setSearching(false);\n    console.log(result);\n\n    setStops(result.data.locations);\n  };\n\n  const fetchData1 = async (searchText) => {\n    setSearching(true);\n    const result = await FindStopService.getByName(searchText);\n    setSearching(false);\n    //console.log(result);\n\n    setStops(result.data.locations);\n  };\n\n  const fetchData2 = async () => {\n    var undef;\n    if (selectedStop != undef) {\n      setSearching(true);\n      const result = await FindStopService.getDepartures(selectedStop.id);\n      setSearching(false);\n\n      console.log(\"Departures:\", result.data.stopEvents);\n      setDeps(result.data.stopEvents);\n    }\n  };\n\n  const [stops, setStops] = useState([]);\n\n  const [selectedStop, setSelectedStop] = useState();\n  const [searchText, setSearchText] = useState();\n  const [deps, setDeps] = useState([]);\n\n  const [searching, setSearching] = useState(false);\n\n  const textChanged = (e) => {\n    //console.log(event.value);\n    console.log(e.target.value);\n    setSearchText(e.target.value);\n  };\n\n  //first cal only\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  useEffect(() => {\n    console.log(\"selectedStop:\", selectedStop);\n    var undef;\n    if (selectedStop != undef) {\n      fetchData2();\n    }\n  }, [selectedStop]);\n\n  useEffect(() => {\n    console.log(\"searchText:\", searchText);\n    fetchData1(searchText);\n  }, [searchText]);\n\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n\n        width: \"50%\",\n        margin: \"auto\",\n      }}\n    >\n      <Countdown\n        style={{ color: \"#3faf3f\" }}\n        givenDate={\"November, 17, 2020\"}\n      />\n      <Autocomplete\n        onChange={(event, newValue) => {\n          setSelectedStop(newValue);\n        }}\n        id=\"controllable-states-demo\"\n        options={stops}\n        getOptionLabel={(option) => option.name}\n        renderInput={(params) => (\n          <TextField\n            {...params}\n            label=\"Stop Name\"\n            value={searchText}\n            onChange={(e) => {\n              textChanged(e);\n            }}\n            variant=\"outlined\"\n          />\n        )}\n      />\n\n      <div>{searching && <LinearProgress />}</div>\n\n      <div\n        style={{\n          background: \"#000\",\n          borderRadius: \"10px\",\n          marginTop: \"50px\",\n          height: \"600px\",\n        }}\n      >\n        <label style={{ color: \"#3faf3f\", fontSize: 30, margin: \"20px\" }}>\n          Departues: {selectedStop != undef && selectedStop.name}\n        </label>\n        <hr />\n        {deps.length > 0 ? (\n          <div\n            style={{\n              height: \"500px\",\n              overflowY: \"auto\",\n              background: \"#000\",\n            }}\n          >\n            <table style={{ listStyle: \"none\", color: \"#3faf3f\" }}>\n              {deps.map((dep, index) => (\n                <tr key={index}>\n                  <td>\n                    <label>{index + 1}</label>\n                  </td>\n                  <td>&nbsp;&nbsp;&nbsp;</td>\n                  <td>\n                    {index % 4 == 0 ? (\n                      <marquee\n                        TimeToCross={\"10000\"}\n                        TimeToChange={\"2000\"}\n                        IsRandom={\"true\"}\n                      >\n                        {dep.location.name}\n                      </marquee>\n                    ) : (\n                      <label style={{ color: \"#3faf3f\" }}>\n                        {dep.transportation.destination.name}\n                      </label>\n                    )}\n                  </td>\n                  <td>&nbsp;</td>\n                  <td>\n                    <label>{\"Time Left (HH:mm:ss):\"}</label>\n                  </td>\n                  <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>\n                  <td>\n                    <b>\n                      <Countdown\n                        daysInHours={true}\n                        date={parseInt(dep.departureTimePlanned)}\n                      />\n                    </b>\n                  </td>\n                  <td>&nbsp;&nbsp;&nbsp;</td>\n                  <td>\n                    <label>{\"Operator:\"}</label>\n                  </td>\n                  <td>&nbsp;&nbsp;&nbsp;</td>\n                  <td>\n                    <label style={{ color: \"#3faf3f\" }}>\n                      {dep.transportation.operator.name}\n                    </label>\n                  </td>\n                </tr>\n              ))}\n            </table>\n          </div>\n        ) : (\n          \"\"\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SearchStop;\n"]},"metadata":{},"sourceType":"module"}